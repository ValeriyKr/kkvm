#include "main.h"

kkvm vm;

int main() {
	std::ios_base::sync_with_stdio(0);
	
	/*vm.RAM[0] = 0x0;
	vm.RAM[1] = 0x0;
	vm.RAM[2] = 0x1;   // nop
	vm.RAM[3] = 0x2;   // push 0x190 ; 0x190
	vm.RAM[4] = 0x190;
	vm.RAM[5] = 0x2;   // push 0x20  ; 0x190 0x20
	vm.RAM[6] = 0x20;
	vm.RAM[7] = 0x7;   // add        ; 0x1B0
	vm.RAM[8] = 0x2;   // push 0x2   ; 0x1B0 0x2
	vm.RAM[9] = 0x2;
	vm.RAM[10] = 0x8;  // mul        ; 0x360
	vm.RAM[11] = 0x2;  // push 0x3   ; 0x360 0x3
	vm.RAM[12] = 0x3;
	vm.RAM[13] = 0x2;  // push 0xa   ; 0x360 0x3 0xA
	vm.RAM[14] = 0xa;
	vm.RAM[15] = 0x9;  // sub        ; 0x360 0x7
	//vm.RAM[16] = 0x5;  // swap       ; 0x7 0x360
	//vm.RAM[17] = 0xa;  // div        ; 0x7B 0x3
	vm.RAM[16] = 0x14;*/
	
	vm.RAM[0] = 0x0;
	vm.RAM[1] = 0x0;
	vm.RAM[2] = 0x1;
	vm.RAM[3] = 0x2;   // push 0x1  ; 0x1
	vm.RAM[4] = 0x1;
	vm.RAM[5] = 0x4;   // dup       ; 0x1 0x1
	vm.RAM[6] = 0x2;   // push 0xa  ; 0x1 0x1 0xa
	vm.RAM[7] = 0xa;
	vm.RAM[8] = 0x6;   // deep 0x2  ; 0x1 0x1 0xa 0x1
	vm.RAM[9] = 0x2;
	vm.RAM[10] = 0x6;  // deep 0x2  ; 0x1 0x1 0xa 0x1 0x1
	vm.RAM[11] = 0x2;
	vm.RAM[12] = 0x7;  // add       ; 0x1 0x1 0xa 0x2
	vm.RAM[13] = 0x5;  // swap      ; 0x1 0x1 0x2 0xa
	vm.RAM[14] = 0xc;  // dec       ; 0x1 0x1 0x2 0x9
	vm.RAM[15] = 0x4;  // dup       ; 0x1 0x1 0x2 0x9 0x9
	vm.RAM[16] = 0x19; // dnip 0x9
	vm.RAM[17] = 0x9;
	vm.RAM[18] = 0x3;  // pop       ; [result]
	
	vm.run();
	
	return 0;
}
